<script type="text/javascript" src="/dnode.js"></script>
<script type="text/javascript">
    window.onload = function () {
        DNode.connect({ pulse : 5000 }, function (remote, conn) {
            var bytes = 0;
            
            remote.emitter.subscribe(function (em) {
                em.on('data', function (buf) {
                    bytes += buf.length;
                    document.getElementById("stats").innerHTML = bytes;
                });
            });
            
            conn.on('pulse', function () {
                document.getElementById("stats").style.color = 'red';
            });
            
            conn.on('end', function () {
                document.getElementById("stats").style.color = 'rgb(200,200,200)';
            });
        });
    };
</script>

<div id="stats">0</div>
